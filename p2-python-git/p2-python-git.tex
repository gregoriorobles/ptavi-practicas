\documentclass[11pt,a4paper]{article}

\usepackage[utf8]{inputenc}
\usepackage{graphics}
\usepackage{url}
\usepackage{amssymb} % Simbolos matematicos

\newcommand{\finejercicio}{
  \begin{footnotesize}
    [Al terminar el ejercicio es recomendable hacer \texttt{commit} de los ficheros modificados]
  \end{footnotesize}
}

\newcommand{\finpractica}{
  \begin{footnotesize}
    [Al terminar la práctica, realiza un \texttt{push} para sincronizar tu repositorio GitHub]
  \end{footnotesize}
}

%\renewcommand{\finejercicio}{
%}
%
%\renewcommand{\finpractica}{
%}


\ProcessOptions

\begin{document}


\title{Práctica 2 - Python avanzado}
\author{Protocolos para la Transmisión de Audio y Vídeo en Internet}
\date{Versión 8.0 – 19.9.2017}


\maketitle


Nota: Esta práctica se puede entregar para su evaluación como parte de la nota de prácticas, pudiendo obtener el estudiante hasta un punto. Para las instrucciones de entrega, mira al final del documento. Para la evaluación de esta entrega se valorará el correcto funcionamiento de lo que se pide y el seguimiento de la guía de estilo de Python.

\section{Introducción}

La programación orientada a objetos en un paradigma de programación muy utilizado en la actualidad y que conviene conocer para la realización de las prácticas de la asignatura. En esta práctica se pretenden ver los conceptos más importantes de este paradigma, implementando funcionalidad en Python.

%Además, el desarrollo contemporáneo se realiza utilizando herramientas de control de versiones como git. GitHub es un sitio web que ofrece repositorios git públicos, por lo que es ampliamente utilizado para todo tipo de desarrollos, en particular de programas de software libre.

\section{Objetivos de la práctica}

\begin{itemize}
  \item Conocer y practicar la programación orientada a objetos (con conceptos como clase, objeto, herencia, instanciación).
  \item Usar varios módulos Python, importando funcionalidad creada en otros módulos.
  \item Conocer y seguir la guía de estilo de programación recomendada para Python (ver PEP8).
  \item Utilizar el sistema de control de versiones git en GitHub.
\end{itemize}

\section{Conocimientos previos necesarios}

\begin{enumerate}
  \item Nociones de Python3 (las de la primera práctica)
\end{enumerate}

Tiempo estimado: 10 horas

\section{Ejercicios}

\begin{enumerate}

  \item Crea una cuenta en GitHub (\url{http://www.github.com}). Una vez tengas una cuenta, has de indicar tu nombre de usuario en GitHub en el formulario en Moodle\footnote{Busca por ``Indica tu cuenta en GitHub'' en Moodle y allí vete a la pestaña ``Añadir entrada'' para encontrar el formulario.}.

    \item Con el navegador, dirígete al repositorio \texttt{ptavi-p2} en la cuenta del profesor en GitHub\footnote{\url{http://github.com/gregoriorobles/ptavi-p2}} y realiza un \texttt{fork}\footnote{Tienes instrucciones de cómo realizar un \texttt{fork} en \url{https://guides.github.com/activities/forking/}.}, de manera que consigas tener una copia del repositorio en tu cuenta de GitHub. Clona en tu ordenador local el repositorio que acabas de crear a local para poder editar los archivos. Trabaja a partir de ahora en ese repositorio, sincronizando (commit) los cambios que vayas realizando según los ejercicios que se comentan a continuación.

  Como tarde al final de la práctica, deberás realizar un \texttt{push} para subir tus cambios a tu repositorio en GitHub.

  \item Investiga el archivo \texttt{calc.py}. Comprueba que en él se implementa una calculadora sencilla que permite sumar y restar. El programa tiene las siguientes características:
  \begin{itemize}
    \item Ha de ser llamado de la siguiente manera por línea de instrucciones (\emph{shell}):
    \begin{verbatim}
    $ python3 calc.py operando1 operación operando2
    \end{verbatim}
donde operación podrá ser \texttt{suma} o \texttt{resta}. Para tomar los parámetros del programa, se podrá hacer uso del módulo sys (\texttt{import sys}), en particular de la lista \texttt{sys.argv}. Se comprobará que los parámetros que el usuario pasa son numéricos (\texttt{integer} o \texttt{float}), imprimiendo \texttt{Error: Non numerical parameters} por pantalla en caso contrario.
    \item Tener dos funciones (métodos): \texttt{sumar} y \texttt{restar}.
    \item Imprimir el resultado por pantalla.
  \end{itemize}


  \item Crea en el archivo \texttt{calcoo.py} un programa Python que implemente la misma funcionalidad (y se ejecute de la misma manera) que \texttt{calc.py}, pero orientada a objetos. Para tal fin, crea un clase \texttt{Calculadora} (las mayúsculas son importantes), que tenga los métodos suma y resta (suma y resta han de devolver el resultado, pero no imprimirlo por pantalla). A su vez, el programa principal deberá tomar los parámetros que el usuario ha dado en la línea de comandos (con \texttt{sys.argv}), instanciar un objeto de la clase Calculadora, y llamar al método correspondiente e imprimir por pantalla el resultado.

\finejercicio

  \item Crea en el archivo \texttt{calcoohija.py} un programa Python que además de la misma funcionalidad de \texttt{calcoo.py}, pueda multiplicar y dividir. Para tal fin, crea un clase \texttt{CalculadoraHija} (las mayúsculas son importantes) que herede de \texttt{Calculadora}, y que además tenga los métodos multiplicar y dividir. En el caso de dividir, ha de capturar la excepción si \texttt{operando2} es cero, imprimiendo el siguiente mensaje de error por pantalla \texttt{Division by zero is not allowed}.
El programa será llamado de la siguiente manera por línea de instrucciones (shell):
    \begin{verbatim}
    $ python3 calcoohija.py operando1 operación operando2
    \end{verbatim}
donde operación podrá ser \texttt{suma}, \texttt{resta}, \texttt{multiplica} o \texttt{divide}.

\finejercicio

  \item Crea el archivo \texttt{calcplus.py} que será llamado de la siguiente manera por línea de instrucciones (shell):
    \begin{verbatim}
    $ python3 calcplus.py fichero
    \end{verbatim}
donde fichero será un fichero de texto posiblemente multilínea con formato \texttt{CSV} (\texttt{comma-separated-value}), esto es, cada línea del mismo tendrá la siguiente forma:
    \begin{verbatim}
    operación,operando1,operando2,operando3,...,operandoN
    \end{verbatim}

	\texttt{calcplus.py} deberá tomar la operación línea a línea y realizarla de manera secuencial con todos los operandos (el primero con el segundo, el resultado de la operación con el tercero, y así sucesivamente) imprimiendo el resultado por pantalla. Así, para las siguientes líneas:
    \begin{verbatim}
    suma,1,2,3,4,5
    resta,31,6,4,3,2,1
    multiplica,1,3,5
    divide,300,10,2
    \end{verbatim}

	el resultado que se imprimirá por pantalla será, para el ejemplo que se da, 15 en todos los casos. En el caso de que la operación sea de división y uno de los operandos sea cero, se imprimirá por pantalla \texttt{Division by zero is not allowed}. El fichero \texttt{calcplus.py} deberá hacer uso de la funcionalidad implementada en \texttt{calcoohija.py}.

\finejercicio

  \item Crea el archivo \texttt{calcplusplus.py} que será llamado de la siguiente manera por línea de instrucciones (shell):
    \begin{verbatim}
    $ python3 calcplusplus.py fichero
    \end{verbatim}

  \texttt{calcplusplus.py} ha de tener la misma funcionalidad que \texttt{calcplus.py} (ver ejercicio anterior), pero deberá hacer uso del módulo \texttt{csv} de Python3\footnote{https://docs.python.org/3.1/library/csv.html} y de la sentencia \texttt{with} de Python.

\finejercicio

  \item Aunque el intérprete de Python admite ciertas libertades a la hora de programar, los programadores de Python con la finalidad de mejorar principalmente la legibilidad del código han acordado seguir una guía de estilo. Esta guía de estilo se encuentra en el \texttt{Python Enhancement Proposal 8} (PEP 8), y contiene instrucciones sobre cómo situar los espacios en blanco, cómo nombrar las variables, etc. Puedes encontrar la guía (original, en inglés, y una versión parcial en castellano) en el Moodle de la asignatura.

  Existe un programa de ayuda de línea de comandos llamado \texttt{pep8} que te permite comprobar si se siguen la mayoría de las indicaciones de PEP8. Pásale la herramienta a tus programas de Python hasta que no dé ningún error.

\finejercicio

\finpractica

\end{enumerate}

\section{¿Qué deberías tener al finalizar la práctica?}

La entrega de práctica se deberá hacer antes del lunes 2 de octubre de 2017 a las 23:55. Para ello, se deberá contar a esa fecha con


\begin{enumerate}
  \item Tener un repositorio git en GitHub con:
  \begin{itemize}
      \item 5 módulos Python: \texttt{calc.py}, \texttt{calcoo.py}, \texttt{calcoohija.py}, \texttt{calcplus.py}, \texttt{calcplusplus.py}.
      \item 2 clases: \texttt{Calculadora} y \texttt{CalculadoraHija}.
      \item Todo ello siguiendo la guía de estilo PEP8.
  \end{itemize}
\end{enumerate}


Se han de tener en cuenta las siguientes consideraciones:
\begin{itemize}
  \item Se valorará que al menos haya diez \texttt{commits} realizados.
  \item Se valorará que el código entregado siga la guía de estilo de Python (véase PEP8).
  \item Se valorará que los programas se invoquen correctamente y que muestren los errores correctamente, según se indica en el enunciado de la práctica.
\end{itemize}

Se puede comprobar la correcta entrega de la práctica utilizando el programa \texttt{check-p2.py} incluido en el repositorio de la práctica. Este programa se ejecuta desde la línea de comandos de la siguiente manera:
\begin{verbatim}
	$ python3 check-p2.py login_github
\end{verbatim}

donde \texttt{login\_github} es tu nombre de usuario en GitHub. El programa comprueba que se han entregado los ficheros que se solicitan (y sólo esos), y parcialmente si se sigue la guía de estilo PEP8.

\end{document}
